import{w as on,m as M,n as ln}from"./transform-cCkha_rj.js";const an=Math.abs,m=Math.atan2,B=Math.cos,cn=Math.max,tn=Math.min,D=Math.sin,G=Math.sqrt,P=1e-12,H=Math.PI,Y=H/2,X=2*H;function fn(r){return r>1?0:r<-1?H:Math.acos(r)}function sn(r){return r>=1?Y:r<=-1?-Y:Math.asin(r)}function gn(r){return r.innerRadius}function yn(r){return r.outerRadius}function hn(r){return r.startAngle}function pn(r){return r.endAngle}function mn(r){return r&&r.padAngle}function dn(r,l,R,q,d,x,c,n){var f=R-r,a=q-l,e=c-d,A=n-x,u=A*f-e*a;if(!(u*u<P))return u=(e*(l-x)-A*(r-d))/u,[r+u*f,l+u*a]}function W(r,l,R,q,d,x,c){var n=r-R,f=l-q,a=(c?x:-x)/G(n*n+f*f),e=a*f,A=-a*n,u=r+e,i=l+A,g=R+e,y=q+A,V=(u+g)/2,o=(i+y)/2,v=g-u,p=y-i,h=v*v+p*p,T=d-x,w=u*y-g*i,O=(p<0?-1:1)*G(cn(0,T*T*h-w*w)),S=(w*p-v*O)/h,k=(-w*v-p*O)/h,j=(w*p+v*O)/h,I=(-w*v+p*O)/h,N=S-V,t=k-o,s=j-V,z=I-o;return N*N+t*t>s*s+z*z&&(S=j,k=I),{cx:S,cy:k,x01:-e,y01:-A,x11:S*(d/T-1),y11:k*(d/T-1)}}function Mn(){var r=gn,l=yn,R=M(0),q=null,d=hn,x=pn,c=mn,n=null,f=on(a);function a(){var e,A,u=+r.apply(this,arguments),i=+l.apply(this,arguments),g=d.apply(this,arguments)-Y,y=x.apply(this,arguments)-Y,V=an(y-g),o=y>g;if(n||(n=e=f()),i<u&&(A=i,i=u,u=A),!(i>P))n.moveTo(0,0);else if(V>X-P)n.moveTo(i*B(g),i*D(g)),n.arc(0,0,i,g,y,!o),u>P&&(n.moveTo(u*B(y),u*D(y)),n.arc(0,0,u,y,g,o));else{var v=g,p=y,h=g,T=y,w=V,O=V,S=c.apply(this,arguments)/2,k=S>P&&(q?+q.apply(this,arguments):G(u*u+i*i)),j=tn(an(i-u)/2,+R.apply(this,arguments)),I=j,N=j,t,s;if(k>P){var z=sn(k/u*D(S)),J=sn(k/i*D(S));(w-=z*2)>P?(z*=o?1:-1,h+=z,T-=z):(w=0,h=T=(g+y)/2),(O-=J*2)>P?(J*=o?1:-1,v+=J,p-=J):(O=0,v=p=(g+y)/2)}var C=i*B(v),F=i*D(v),K=u*B(T),L=u*D(T);if(j>P){var Q=i*B(p),U=i*D(p),Z=u*B(h),$=u*D(h),E;if(V<H)if(E=dn(C,F,Z,$,Q,U,K,L)){var b=C-E[0],_=F-E[1],nn=Q-E[0],en=U-E[1],rn=1/D(fn((b*nn+_*en)/(G(b*b+_*_)*G(nn*nn+en*en)))/2),un=G(E[0]*E[0]+E[1]*E[1]);I=tn(j,(u-un)/(rn-1)),N=tn(j,(i-un)/(rn+1))}else I=N=0}O>P?N>P?(t=W(Z,$,C,F,i,N,o),s=W(Q,U,K,L,i,N,o),n.moveTo(t.cx+t.x01,t.cy+t.y01),N<j?n.arc(t.cx,t.cy,N,m(t.y01,t.x01),m(s.y01,s.x01),!o):(n.arc(t.cx,t.cy,N,m(t.y01,t.x01),m(t.y11,t.x11),!o),n.arc(0,0,i,m(t.cy+t.y11,t.cx+t.x11),m(s.cy+s.y11,s.cx+s.x11),!o),n.arc(s.cx,s.cy,N,m(s.y11,s.x11),m(s.y01,s.x01),!o))):(n.moveTo(C,F),n.arc(0,0,i,v,p,!o)):n.moveTo(C,F),!(u>P)||!(w>P)?n.lineTo(K,L):I>P?(t=W(K,L,Q,U,u,-I,o),s=W(C,F,Z,$,u,-I,o),n.lineTo(t.cx+t.x01,t.cy+t.y01),I<j?n.arc(t.cx,t.cy,I,m(t.y01,t.x01),m(s.y01,s.x01),!o):(n.arc(t.cx,t.cy,I,m(t.y01,t.x01),m(t.y11,t.x11),!o),n.arc(0,0,u,m(t.cy+t.y11,t.cx+t.x11),m(s.cy+s.y11,s.cx+s.x11),o),n.arc(s.cx,s.cy,I,m(s.y11,s.x11),m(s.y01,s.x01),!o))):n.arc(0,0,u,T,h,o)}if(n.closePath(),e)return n=null,e+""||null}return a.centroid=function(){var e=(+r.apply(this,arguments)+ +l.apply(this,arguments))/2,A=(+d.apply(this,arguments)+ +x.apply(this,arguments))/2-H/2;return[B(A)*e,D(A)*e]},a.innerRadius=function(e){return arguments.length?(r=typeof e=="function"?e:M(+e),a):r},a.outerRadius=function(e){return arguments.length?(l=typeof e=="function"?e:M(+e),a):l},a.cornerRadius=function(e){return arguments.length?(R=typeof e=="function"?e:M(+e),a):R},a.padRadius=function(e){return arguments.length?(q=e==null?null:typeof e=="function"?e:M(+e),a):q},a.startAngle=function(e){return arguments.length?(d=typeof e=="function"?e:M(+e),a):d},a.endAngle=function(e){return arguments.length?(x=typeof e=="function"?e:M(+e),a):x},a.padAngle=function(e){return arguments.length?(c=typeof e=="function"?e:M(+e),a):c},a.context=function(e){return arguments.length?(n=e??null,a):n},a}function xn(r,l){return l<r?-1:l>r?1:l>=r?0:NaN}function An(r){return r}function Rn(){var r=An,l=xn,R=null,q=M(0),d=M(X),x=M(0);function c(n){var f,a=(n=ln(n)).length,e,A,u=0,i=new Array(a),g=new Array(a),y=+q.apply(this,arguments),V=Math.min(X,Math.max(-X,d.apply(this,arguments)-y)),o,v=Math.min(Math.abs(V)/a,x.apply(this,arguments)),p=v*(V<0?-1:1),h;for(f=0;f<a;++f)(h=g[i[f]=f]=+r(n[f],f,n))>0&&(u+=h);for(l!=null?i.sort(function(T,w){return l(g[T],g[w])}):R!=null&&i.sort(function(T,w){return R(n[T],n[w])}),f=0,A=u?(V-a*p)/u:0;f<a;++f,y=o)e=i[f],h=g[e],o=y+(h>0?h*A:0)+p,g[e]={data:n[e],index:f,value:h,startAngle:y,endAngle:o,padAngle:v};return g}return c.value=function(n){return arguments.length?(r=typeof n=="function"?n:M(+n),c):r},c.sortValues=function(n){return arguments.length?(l=n,R=null,c):l},c.sort=function(n){return arguments.length?(R=n,l=null,c):R},c.startAngle=function(n){return arguments.length?(q=typeof n=="function"?n:M(+n),c):q},c.endAngle=function(n){return arguments.length?(d=typeof n=="function"?n:M(+n),c):d},c.padAngle=function(n){return arguments.length?(x=typeof n=="function"?n:M(+n),c):x},c}export{Mn as a,Rn as p};
