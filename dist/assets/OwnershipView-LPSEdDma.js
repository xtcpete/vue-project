import{I as T,c as C,s as z,l as _,f as N,o as $}from"./transform-cCkha_rj.js";import{_ as O,o as R,c as E,a as V}from"./index-EzdrIXnI.js";import{e as q,a as H,b as L,l as D}from"./line-tLHu-7wM.js";import{c as U,j as P}from"./colors-_AWqXR07.js";function j(t){return t}function W(t,...r){return F(t,j,j,r)}function F(t,r,i,n){return function o(s,c){if(c>=n.length)return i(s);const u=new T,d=n[c++];let l=-1;for(const e of s){const h=d(e,++l,s),a=u.get(h);a?a.push(e):u.set(h,[e])}for(const[e,h]of u)u.set(e,o(h,c));return r(u)}(t,0)}function Y(t,r){let i;if(r===void 0)for(const n of t)n!=null&&(i<n||i===void 0&&n>=n)&&(i=n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}return i}function Z(t){var r=0,i=t.children,n=i&&i.length;if(!n)r=1;else for(;--n>=0;)r+=i[n].value;t.value=r}function G(){return this.eachAfter(Z)}function J(t,r){let i=-1;for(const n of this)t.call(r,n,++i,this);return this}function K(t,r){for(var i=this,n=[i],o,s,c=-1;i=n.pop();)if(t.call(r,i,++c,this),o=i.children)for(s=o.length-1;s>=0;--s)n.push(o[s]);return this}function Q(t,r){for(var i=this,n=[i],o=[],s,c,u,d=-1;i=n.pop();)if(o.push(i),s=i.children)for(c=0,u=s.length;c<u;++c)n.push(s[c]);for(;i=o.pop();)t.call(r,i,++d,this);return this}function X(t,r){let i=-1;for(const n of this)if(t.call(r,n,++i,this))return n}function tt(t){return this.eachAfter(function(r){for(var i=+t(r.data)||0,n=r.children,o=n&&n.length;--o>=0;)i+=n[o].value;r.value=i})}function et(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}function nt(t){for(var r=this,i=rt(r,t),n=[r];r!==i;)r=r.parent,n.push(r);for(var o=n.length;t!==i;)n.splice(o,0,t),t=t.parent;return n}function rt(t,r){if(t===r)return t;var i=t.ancestors(),n=r.ancestors(),o=null;for(t=i.pop(),r=n.pop();t===r;)o=t,t=i.pop(),r=n.pop();return o}function it(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}function at(){return Array.from(this)}function ot(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}function st(){var t=this,r=[];return t.each(function(i){i!==t&&r.push({source:i.parent,target:i})}),r}function*ct(){var t=this,r,i=[t],n,o,s;do for(r=i.reverse(),i=[];t=r.pop();)if(yield t,n=t.children)for(o=0,s=n.length;o<s;++o)i.push(n[o]);while(i.length)}function I(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=dt)):r===void 0&&(r=ut);for(var i=new k(t),n,o=[i],s,c,u,d;n=o.pop();)if((c=r(n.data))&&(d=(c=Array.from(c)).length))for(n.children=c,u=d-1;u>=0;--u)o.push(s=c[u]=new k(c[u])),s.parent=n,s.depth=n.depth+1;return i.eachBefore(ht)}function lt(){return I(this).eachBefore(ft)}function ut(t){return t.children}function dt(t){return Array.isArray(t)?t[1]:null}function ft(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ht(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function k(t){this.data=t,this.depth=this.height=0,this.parent=null}k.prototype=I.prototype={constructor:k,count:G,each:J,eachAfter:Q,eachBefore:K,find:X,sum:tt,sort:et,path:nt,ancestors:it,descendants:at,leaves:ot,links:st,copy:lt,[Symbol.iterator]:ct};function pt(t){if(typeof t!="function")throw new Error;return t}function w(){return 0}function b(t){return function(){return t}}function gt(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function vt(t,r,i,n,o){for(var s=t.children,c,u=-1,d=s.length,l=t.value&&(n-r)/t.value;++u<d;)c=s[u],c.y0=i,c.y1=o,c.x0=r,c.x1=r+=c.value*l}function mt(t,r,i,n,o){for(var s=t.children,c,u=-1,d=s.length,l=t.value&&(o-i)/t.value;++u<d;)c=s[u],c.x0=r,c.x1=n,c.y0=i,c.y1=i+=c.value*l}var yt=(1+Math.sqrt(5))/2;function xt(t,r,i,n,o,s){for(var c=[],u=r.children,d,l,e=0,h=0,a=u.length,g,v,p=r.value,f,m,x,A,B,M,y;e<a;){g=o-i,v=s-n;do f=u[h++].value;while(!f&&h<a);for(m=x=f,M=Math.max(v/g,g/v)/(p*t),y=f*f*M,B=Math.max(x/y,y/m);h<a;++h){if(f+=l=u[h].value,l<m&&(m=l),l>x&&(x=l),y=f*f*M,A=Math.max(x/y,y/m),A>B){f-=l;break}B=A}c.push(d={value:f,dice:g<v,children:u.slice(e,h)}),d.dice?vt(d,i,n,o,p?n+=v*f/p:s):mt(d,i,n,p?i+=g*f/p:o,s),p-=f,e=h}return c}const wt=function t(r){function i(n,o,s,c,u){xt(r,n,o,s,c,u)}return i.ratio=function(n){return t((n=+n)>1?n:1)},i}(yt);function bt(){var t=wt,r=!1,i=1,n=1,o=[0],s=w,c=w,u=w,d=w,l=w;function e(a){return a.x0=a.y0=0,a.x1=i,a.y1=n,a.eachBefore(h),o=[0],r&&a.eachBefore(gt),a}function h(a){var g=o[a.depth],v=a.x0+g,p=a.y0+g,f=a.x1-g,m=a.y1-g;f<v&&(v=f=(v+f)/2),m<p&&(p=m=(p+m)/2),a.x0=v,a.y0=p,a.x1=f,a.y1=m,a.children&&(g=o[a.depth+1]=s(a)/2,v+=l(a)-g,p+=c(a)-g,f-=u(a)-g,m-=d(a)-g,f<v&&(v=f=(v+f)/2),m<p&&(p=m=(p+m)/2),t(a,v,p,f,m))}return e.round=function(a){return arguments.length?(r=!!a,e):r},e.size=function(a){return arguments.length?(i=+a[0],n=+a[1],e):[i,n]},e.tile=function(a){return arguments.length?(t=pt(a),e):t},e.padding=function(a){return arguments.length?e.paddingInner(a).paddingOuter(a):e.paddingInner()},e.paddingInner=function(a){return arguments.length?(s=typeof a=="function"?a:b(+a),e):s},e.paddingOuter=function(a){return arguments.length?e.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):e.paddingTop()},e.paddingTop=function(a){return arguments.length?(c=typeof a=="function"?a:b(+a),e):c},e.paddingRight=function(a){return arguments.length?(u=typeof a=="function"?a:b(+a),e):u},e.paddingBottom=function(a){return arguments.length?(d=typeof a=="function"?a:b(+a),e):d},e.paddingLeft=function(a){return arguments.length?(l=typeof a=="function"?a:b(+a),e):l},e}const S=U("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),_t={name:"OwenershipChart",mounted:function(){C("households.csv").then(function(t){var r=document.getElementById("households").clientHeight,i=document.getElementById("households").clientWidth;const n={top:10,right:150,bottom:30,left:50};i=i-n.left-n.right,r=r-n.top-n.bottom;const o=z("#households").append("svg").attr("width",i+n.left+n.right).attr("height",r+n.top+n.bottom).append("g").attr("transform",`translate(${n.left},${n.top})`),s=W(t,l=>l.pet),c=_().domain(q(t,function(l){return l.year})).range([0,i]);o.append("g").attr("transform",`translate(0, ${r})`).style("font-size","12px").call(H(c).ticks(10).tickFormat(N(".0f")));const u=_().domain([0,Y(t,function(l){return+l.household})]).range([r,0]);o.append("g").style("font-size","12px").call(L(u));const d=$(S);o.selectAll(".line").data(s).join("path").attr("fill","none").attr("stroke",function(l){return d(l[0])}).attr("stroke-width",3).attr("d",function(l){return D().x(function(e){return c(e.year)}).y(function(e){return u(+e.household)})(l[1])}).attr("class","line").attr("opacity",1),o.selectAll("legend_lines").data(s.keys()).enter().append("line").attr("x1",i+10).attr("y1",function(l,e){return 5+e*30}).attr("x2",i+40).attr("y2",function(l,e){return 5+e*30}).style("stroke",function(l){return d(l)}).attr("stroke-width",3),o.selectAll("legend_labels").data(s.keys()).enter().append("text").attr("x",i+50).attr("y",function(l,e){return 5+e*30}).style("fill",function(l){return d(l)}).text(function(l){return l}).style("font-size","15px").attr("alignment-baseline","middle").on("mouseover",function(l,e){var h=e;o.selectAll(".line").transition().delay(100).attr("opacity",function(a){return a[0]===h?1:.2})}).on("mouseout",function(){o.selectAll(".line").transition().delay(100).attr("opacity",1)}),o.append("text").attr("text-anchor","end").attr("x",i/2).attr("y",r+25).text("Year").style("font-size","15px").attr("alignment-baseline","middle"),o.append("text").attr("text-anchor","end").attr("transform","rotate(-90)").attr("y",-40).attr("x",-80).text("No. of U.S. households(millions)").style("font-size","15px").attr("alignment-baseline","middle")}),P("sources.json").then(function(t){var r=document.getElementById("sources").clientHeight,i=document.getElementById("sources").clientWidth;const n={top:10,right:0,bottom:10,left:10};i=i-n.left-n.right,r=r-n.top-n.bottom;const o=z("#sources").append("svg").attr("width",i+n.left+n.right).attr("height",r+n.top+n.bottom).append("g").attr("transform",`translate(${n.left}, ${n.top})`),s=I(t).sum(function(e){return e.value});bt().size([i,r]).paddingTop(28).paddingRight(7).paddingInner(3)(s);const c=N(".2f"),u=$(S),d=_().domain([0,40]).range([10,20]),l=_().domain([0,40]).range([.5,1]);o.selectAll("rect").data(s.leaves()).join("rect").attr("x",function(e){return e.x0}).attr("y",function(e){return e.y0}).attr("width",function(e){return e.x1-e.x0}).attr("height",function(e){return e.y1-e.y0}).style("stroke","black").style("fill",function(e){return u(e.parent.data.name)}).style("opacity",function(e){return l(e.data.value)}),o.selectAll("text").data(s.leaves()).enter().append("text").attr("x",function(e){return e.x0+3}).attr("y",function(e){return e.y0+17}).text(function(e){return e.data.name}).attr("font-size",e=>d(e.data.value)+"px").attr("fill","white"),o.selectAll("vals").data(s.leaves()).enter().append("text").attr("x",function(e){return e.y1-e.y0>30?e.x0+3:e.x0+50}).attr("y",function(e){return e.y1-e.y0>30?e.y0+30:e.y0+17}).text(function(e){return c(e.data.value)}).attr("font-size","11px").attr("fill","white"),console.log(s.leaves()),o.selectAll("titles").data(s.descendants().filter(function(e){return e.depth==1})).enter().append("text").attr("x",function(e){return e.x0}).attr("y",function(e){return e.y0+15}).text(function(e){return e.data.name}).attr("font-size","19px").attr("fill",function(e){return u(e.data.name)})})}},kt={class:"OwnershipChart"},At=V('<h1 class="title">Pet Ownership in the U.S.</h1><div class="row"><div class="col"><div class="stat-card"><div class="d-flex justify-content-between"><div class="stat-title">Households owning a pet</div><span class="stat-icon">üè†</span></div><div class="stat-number">90.5M</div></div></div><div class="col"><div class="stat-card"><div class="d-flex justify-content-between"><div class="stat-title">Number of owned dogs</div><span class="stat-icon">üê∂</span></div><div class="stat-number">78.0M</div></div></div><div class="col"><div class="stat-card"><div class="d-flex justify-content-between"><div class="stat-title">Number of owned <br>cats</div><span class="stat-icon">üê±</span></div><div class="stat-number">85.8M</div></div></div></div><br><div class="card"><div class="card-body"><h4>Number of U.S. Households That Own a Pet, by Type of Animal (millions)</h4><svg id="households" width="100%" height="400"></svg></div></div><br><div class="card"><div class="card-body"><h4>Sources of Dogs and Cats (millions)</h4><svg id="sources" width="100%" height="600"></svg></div></div>',6),Bt=[At];function Mt(t,r,i,n,o,s){return R(),E("div",kt,Bt)}const jt=O(_t,[["render",Mt]]);export{jt as default};
